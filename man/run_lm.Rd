% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_lm.R
\name{run_lm}
\alias{run_lm}
\title{run_lm}
\usage{
run_lm(rec, new_data = NULL, ...)
}
\arguments{
\item{rec}{a prepped recipe (recipe)}

\item{new_data}{data to use with the recipe (data.frame)}

\item{...}{arguments to pass to lm}
}
\value{
a list that contains the model fit info, the response weights,
 and the contributions for each component
}
\description{
run_lm
}
\examples{
# kernel
library(hydrorecipes)
set.seed(1)
n_data   <- 200
kern_len <- 20
kern     <- 0.8^(0:kern_len) * 0.5
kern     <- kern / sum(kern)
input    <- rnorm(n_data)
outcome  <- fftw_convolve(input, rev(kern), align = 'right')

plot(input, type = 'l', col = '#b47846', lwd = 2, ylab = 'values',
  main = 'orange is input, blue is output')
points(outcome, type = 'l', col = 'steelblue', lwd = 2)
data <- data.frame(outcome = outcome, input = input)
rec <- recipe(outcome~input, data) |>
  step_distributed_lag(input, knots = log_lags(4, 20)) |>
  step_rm('input') |>
  prep()
res <- run_lm(rec,
  new_data = data)
plot(co~lag, res$response[[1]], type = 'o')
points(y = kern, x = 0:20, type = 'o', pch = 20, col = '#b47846', lwd = 2)
plot(outcome~predicted, res$components, type ='p', pch = 20, cex = 0.5)
}
